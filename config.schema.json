{
  "pluginAlias": "Govee",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "customUiPath": "./lib/homebridge-ui",
  "headerDisplay": "<p align=\"center\"><img width=\"60%\" src=\"https://user-images.githubusercontent.com/43026681/101324574-5e997d80-3862-11eb-81b0-932330f6e242.png\"></p><p align=\"center\">For help and support please visit our <a href=\"https://github.com/bwp91/homebridge-govee/wiki\">GitHub Wiki</a>. We hope you find this plugin useful!</p>",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Plugin Name",
        "type": "string",
        "default": "Govee"
      },
      "apiKey": {
        "type": "string",
        "title": "Govee API Key",
        "description": "You can obtain your API key using <a href=\"https://github.com/bwp91/homebridge-govee/wiki/Configuration#obtaining-your-api-key\" target=\"_blank\">this guide</a>.",
        "required": true
      },
      "refreshTime": {
        "title": "Refresh Interval",
        "type": "integer",
        "description": "An interval (in seconds) in which your devices will refresh with Govee. Must be 15 or more.",
        "placeholder": 15,
        "minimum": 15
      },
      "controlInterval": {
        "title": "Control Interval",
        "type": "integer",
        "description": "A minimum delay (in milliseconds) between device updates being sent. Increasing this may help if you find device updates are not working or if you use HomeKit scenes/groupings. Must be 500 or more.",
        "placeholder": 500,
        "minimum": 500
      },
      "disableDeviceLogging": {
        "type": "boolean",
        "title": "Disable Device Logging",
        "description": "Global logging setting for accessory status changes. If true then accessory status changes will not be logged. This can also be set per accessory later in the config."
      },
      "debug": {
        "title": "Debug Logging",
        "type": "boolean",
        "description": "Global logging setting for the plugin. If true then debug information will be added to the log. This can also be set per accessory later in the config."
      },
      "debugFakegato": {
        "title": "Debug Fakegato",
        "type": "boolean",
        "description": "If true, the included Fakegato library will debug to the log."
      },
      "disablePlugin": {
        "title": "Disable Plugin",
        "type": "boolean",
        "description": "If true, the plugin will remove all accessories and not load the plugin on restart."
      },
      "switchDevices": {
        "title": "Outlet Devices",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "label": {
              "title": "Label",
              "type": "string",
              "description": "This setting has no effect except to help identify this device."
            },
            "deviceId": {
              "title": "Device ID",
              "type": "string",
              "description": "Enter the 23 digit Govee Device ID to begin (e.g. 12:AB:A1:C5:A8:99:D2:17).",
              "minLength": 23,
              "maxLength": 23
            },
            "ignoreDevice": {
              "type": "boolean",
              "title": "Hide From HomeKit",
              "description": "If true, this accessory will be removed and ignored from HomeKit.",
              "condition": {
                "functionBody": "return (model.switchDevices && model.switchDevices[arrayIndices] && model.switchDevices[arrayIndices].deviceId && model.switchDevices[arrayIndices].deviceId.length === 23);"
              }
            },
            "showAs": {
              "type": "string",
              "title": "Show As",
              "oneOf": [
                {
                  "title": "Outlet (Default)",
                  "enum": ["default"]
                },
                {
                  "title": "Switch",
                  "enum": ["switch"]
                },
                {
                  "title": "Air Purifier",
                  "enum": ["purifier"]
                }
              ],
              "condition": {
                "functionBody": "return (model.switchDevices && model.switchDevices[arrayIndices] && model.switchDevices[arrayIndices].deviceId && model.switchDevices[arrayIndices].deviceId.length === 23 && !model.switchDevices[arrayIndices].ignoreDevice);"
              }
            },
            "overrideLogging": {
              "type": "string",
              "title": "Override Logging Setting",
              "description": "Override global logging setting for this device.",
              "oneOf": [
                {
                  "title": "Default (Use Global Setting)",
                  "enum": ["default"]
                },
                {
                  "title": "Enable Standard Logging",
                  "enum": ["standard"]
                },
                {
                  "title": "Enable Debug Logging",
                  "enum": ["debug"]
                },
                {
                  "title": "Disable All Logging",
                  "enum": ["disable"]
                }
              ],
              "condition": {
                "functionBody": "return (model.switchDevices && model.switchDevices[arrayIndices] && model.switchDevices[arrayIndices].deviceId && model.switchDevices[arrayIndices].deviceId.length === 23 && !model.switchDevices[arrayIndices].ignoreDevice);"
              }
            }
          }
        }
      },
      "lightDevices": {
        "title": "Light Devices",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "label": {
              "title": "Label",
              "type": "string",
              "description": "This setting has no effect except to help identify this device."
            },
            "deviceId": {
              "title": "Device ID",
              "type": "string",
              "description": "Enter the 23 digit Govee Device ID to begin (e.g. 12:AB:A1:C5:A8:99:D2:17).",
              "minLength": 23,
              "maxLength": 23
            },
            "ignoreDevice": {
              "type": "boolean",
              "title": "Hide From HomeKit",
              "description": "If true, this accessory will be removed and ignored from HomeKit.",
              "condition": {
                "functionBody": "return (model.lightDevices && model.lightDevices[arrayIndices] && model.lightDevices[arrayIndices].deviceId && model.lightDevices[arrayIndices].deviceId.length === 23);"
              }
            },
            "brightnessStep": {
              "title": "Brightness Step",
              "type": "integer",
              "description": "A minimum step for the brightness slider in the Home app. Must be 1 or more.",
              "placeholder": 1,
              "minimum": 1,
              "condition": {
                "functionBody": "return (model.lightDevices && model.lightDevices[arrayIndices] && model.lightDevices[arrayIndices].deviceId && model.lightDevices[arrayIndices].deviceId.length === 23 && !model.lightDevices[arrayIndices].ignoreDevice);"
              }
            },
            "adaptiveLightingShift": {
              "title": "Adaptive Lighting Shift",
              "type": "integer",
              "description": "The mired for each Adaptive Lighting update will be increased by this value, making the light appear warmer. Set to -1 to remove Adaptive Lighting feature. Must be -1 or more.",
              "placeholder": 0,
              "minimum": -1,
              "condition": {
                "functionBody": "return (model.lightDevices && model.lightDevices[arrayIndices] && model.lightDevices[arrayIndices].deviceId && model.lightDevices[arrayIndices].deviceId.length === 23 && !model.lightDevices[arrayIndices].ignoreDevice);"
              }
            },
            "overrideLogging": {
              "type": "string",
              "title": "Override Logging Setting",
              "description": "Override global logging setting for this device.",
              "oneOf": [
                {
                  "title": "Default (Use Global Setting)",
                  "enum": ["default"]
                },
                {
                  "title": "Enable Standard Logging",
                  "enum": ["standard"]
                },
                {
                  "title": "Enable Debug Logging",
                  "enum": ["debug"]
                },
                {
                  "title": "Disable All Logging",
                  "enum": ["disable"]
                }
              ],
              "condition": {
                "functionBody": "return (model.lightDevices && model.lightDevices[arrayIndices] && model.lightDevices[arrayIndices].deviceId && model.lightDevices[arrayIndices].deviceId.length === 23 && !model.lightDevices[arrayIndices].ignoreDevice);"
              }
            }
          }
        }
      },
      "ignoredDevices": {
        "title": "Ignored Devices",
        "type": "array",
        "items": {
          "type": "string",
          "title": "Device ID",
          "description": "Govee Device ID of the device you wish to ignore, e.g. 12:AB:A1:C5:A8:99:D2:17."
        }
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Required Settings",
      "items": ["apiKey"]
    },
    {
      "type": "fieldset",
      "title": "Optional Settings",
      "expandable": true,
      "items": ["refreshTime", "controlInterval", "disableDeviceLogging", "debug", "disablePlugin"]
    },
    {
      "key": "switchDevices",
      "expandable": true,
      "title": "Outlet Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [
        {
          "type": "fieldset",
          "items": [
            "switchDevices[].label",
            "switchDevices[].deviceId",
            "switchDevices[].ignoreDevice",
            "switchDevices[].showAs",
            "switchDevices[].overrideLogging"
          ]
        }
      ]
    },
    {
      "key": "lightDevices",
      "expandable": true,
      "title": "Light Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [
        {
          "type": "fieldset",
          "items": [
            "lightDevices[].label",
            "lightDevices[].deviceId",
            "lightDevices[].ignoreDevice",
            "lightDevices[].brightnessStep",
            "lightDevices[].adaptiveLightingShift",
            "lightDevices[].overrideLogging"
          ]
        }
      ]
    },
    {
      "key": "ignoredDevices",
      "expandable": true,
      "title": "Ignored Devices",
      "add": "Add Another Device",
      "type": "array",
      "items": [
        {
          "type": "fieldset",
          "items": ["ignoredDevices[]"]
        }
      ]
    }
  ]
}
